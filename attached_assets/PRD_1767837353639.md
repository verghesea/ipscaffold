# IP Scaffold - Product Requirements Document (PRD)

## Product Overview

**Product Name:** IP Scaffold

**Version:** 1.0 MVP

**Purpose:** A human+automation tool that helps commercialize deep technology by transforming technical intellectual property (patents) into business-ready narratives and frameworks.

**Target Users:**
- Technology Transfer Office (TTO) staff
- Researchers and scientists
- Deep tech founders
- Investors evaluating IP

---

## Problem Statement

Deep technology innovations struggle to bridge the gap between technical excellence and commercial viability. Researchers and TTOs lack the resources to:
- Translate complex technical IP into accessible business language
- Create compelling narratives for investors, partners, and customers
- Develop go-to-market frameworks quickly and affordably

**Current Solutions:**
- Hire expensive consultants ($10k-50k+ per project)
- Hire full-time business development staff ($100k+ annually)
- Attempt DIY with no framework or expertise

**IP Scaffold Solution:**
For $2 per patent analysis, users can upload patent PDFs and receive three AI-generated business artifacts that transform technical IP into actionable commercial insights.

---

## Success Metrics

**MVP Success Criteria (3 months):**
- 100 patents processed
- 50 registered users
- 80% completion rate (users who upload finish the flow)
- 70% return rate (users upload multiple patents)

**Quality Metrics:**
- Users rate artifacts 4+ stars (post-MVP feedback mechanism)
- Less than 5% error rate in PDF parsing
- 95% uptime

---

## User Personas

### Persona 1: Sarah - TTO Officer
- Age: 35-45
- Works at university tech transfer office
- Manages 50-100 active patents
- Pain: Needs to create pitch materials for each patent to attract licensees
- Goal: Quickly assess commercial potential and create investor-ready summaries

### Persona 2: Dr. Michael - Researcher/Inventor
- Age: 40-55
- Has 2-3 patents from academic research
- Pain: Doesn't understand how to position technology commercially
- Goal: Explore startup/spinout opportunities

### Persona 3: Lisa - Deep Tech Founder
- Age: 30-40
- Licensing university IP for startup
- Pain: Needs business frameworks to pitch investors
- Goal: Create pitch deck and business model quickly

---

## Core User Journey

### Flow: First-Time User

```
Landing Page
    ↓ (uploads patent PDF)
Processing & Preview
    ↓ (views ELIA15 on screen)
Email Gate
    ↓ (enters email)
Email Sent Confirmation
    ↓ (checks inbox, clicks magic link)
Account Created & Logged In
    ↓ (redirected to dashboard)
Dashboard
    ↓ (sees list of patents, clicks one)
Patent Detail Page
    ↓ (views all 3 artifacts)
Download Artifacts (PDF/DOCX/TXT)
```

### Flow: Returning User

```
Landing Page
    ↓ (already has cookie/session OR clicks magic link from email)
Dashboard
    ↓ (can upload new patent or view existing)
Patent Detail Page
    ↓ (downloads artifacts)
```

---

## Feature Requirements

### 1. Landing Page (Public)

**Purpose:** Allow anonymous users to upload their first patent PDF

**Requirements:**
- Clean, simple upload interface
- File upload accepts .pdf files only
- Max file size: 10MB
- "Analyze Your IP" primary CTA button
- Brief value prop text: "Transform your patent into business-ready insights in minutes"
- No login required

**Technical Notes:**
- Drag-and-drop file upload
- Client-side validation (file type, size)
- Progress indicator during upload

---

### 2. PDF Processing & ELIA15 Preview

**Purpose:** Parse patent, generate ELIA15, show preview to build trust

**Requirements:**

**Stage 1: Processing (loading state)**
- Show progress indicator: "Parsing your patent..."
- Extract from PDF:
  - Title
  - Inventors
  - Assignee/Institution
  - Filing date
  - Issue date
  - Full text content

**Stage 2: ELIA15 Generation**
- Call AI API with full text + ELIA15 prompt
- Show progress: "Generating explanation..."
- Display completed ELIA15 on screen (full content visible)

**Stage 3: Email Gate**
- Show ELIA15 content (not truncated)
- Display email input form:
  - "Enter your email to unlock Business Narrative and Golden Circle, and create your free account"
  - Email input field
  - "Get Full Access" button
  - Fine print: "100 free credits included (10 patents)"

**Technical Notes:**
- All processing happens server-side
- Patent saved to database with status='processing'
- ELIA15 artifact saved to database when complete
- Status updated to 'elia15_complete'

---

### 3. Email & Magic Link Authentication

**Purpose:** Passwordless account creation and login

**Requirements:**

**Email Submission:**
- User enters email on preview page
- System checks if email exists:
  - If new: Create user account with 100 free credits
  - If existing: Find user account
- Generate secure magic link token
- Send email with magic link
- Show confirmation: "Check your email! We sent a magic link to [email]"

**Email Template:**
- Subject: "Access Your IP Scaffold Analysis"
- Body:
  - "Click below to access your IP analysis for [Patent Title]"
  - Magic link button (expires in 1 hour)
  - "This link will log you in and take you to your dashboard"
  - Footer: IP Scaffold branding

**Magic Link Verification:**
- User clicks link: `/auth/verify/{token}`
- System validates token:
  - Check expiry (1 hour)
  - Check not already used
  - Mark token as used
- Create session/login user
- Redirect to dashboard

**Technical Notes:**
- Tokens: cryptographically secure, URL-safe, 32+ characters
- Token expiry: 1 hour from creation
- One-time use only
- Secure session management (httpOnly cookies)

---

### 4. Background Artifact Generation

**Purpose:** Generate remaining 2 artifacts while user is checking email

**Requirements:**

**Trigger:** When user submits email (Step 3)

**Processing Queue:**
- Generate Business Narrative (uses ELIA15 + full text)
- Generate Golden Circle (uses ELIA15 + Business Narrative)
- Update patent status to 'completed'

**Status Tracking:**
- Patent status values:
  - 'processing' (initial upload)
  - 'elia15_complete' (after ELIA15 generated)
  - 'completed' (all 3 artifacts done)
  - 'failed' (if error occurs)

**Error Handling:**
- If AI generation fails, retry once
- If still fails, mark status='failed'
- Log error for debugging

**Technical Notes:**
- Use background threading or task queue
- Estimated time: 30-60 seconds for both artifacts
- By the time user clicks magic link, artifacts should be ready

---

### 5. Dashboard (Authenticated)

**Purpose:** Show user's patent portfolio

**Requirements:**

**Layout:**
- Header: "Your IP Portfolio" + credit balance display
- "Upload New Patent" button (prominent)
- Table of patents with columns:
  - Patent Title
  - Assignee/Institution
  - Date Uploaded
  - Status (Processing / Ready / Failed)
  - Actions (View Details / Delete)

**Sorting/Filtering:**
- Default sort: newest first
- Status filter: All / Ready / Processing

**Empty State:**
- If no patents: "Upload your first patent to get started"
- Upload button

**Credit Display:**
- "Credits: 87 remaining" (example)
- Link to purchase more (Phase 2)

**Technical Notes:**
- Pagination if >20 patents (future)
- Real-time status updates optional (polling or websockets)

---

### 6. Patent Detail View (Authenticated)

**Purpose:** Display all artifacts and allow downloads

**Requirements:**

**Patent Metadata Section:**
- Title (large, prominent)
- Inventors
- Assignee/Institution
- Filing Date
- Issue Date

**Artifacts Display:**
- Tab interface OR accordion sections:
  1. ELIA15
  2. Business Narrative
  3. Golden Circle

**Each artifact section:**
- Well-formatted text display (markdown rendering)
- Readable typography
- Section headers preserved from AI output

**Download Options:**
- "Download All Artifacts" button (primary)
- Format options:
  - PDF (formatted, printable)
  - DOCX (editable in Word/Google Docs)
  - TXT (plain text)

**Download Behavior:**
- Click downloads file immediately (no email)
- Filename: `{patent_title}_artifacts.{format}`
- PDF: Nicely formatted with headers, page breaks
- DOCX: Structured with styles (Heading 1, Heading 2, Body)
- TXT: Plain text with clear section separators

**Navigation:**
- "← Back to Dashboard" link
- "Upload Another Patent" button

**Technical Notes:**
- Generate download files on-demand (not pre-generated)
- PDF: Use ReportLab or WeasyPrint
- DOCX: Use python-docx library
- TXT: Simple text concatenation

---

### 7. Upload New Patent (Authenticated)

**Purpose:** Allow existing users to upload additional patents

**Requirements:**

**Pre-Upload Check:**
- Check user credit balance
- If credits < 10: Show message "You need 10 credits to process a patent. Purchase more credits."
- If credits >= 10: Allow upload

**Upload Flow:**
- Same as first-time flow, but:
  - No email gate (already authenticated)
  - Deduct 10 credits immediately on upload
  - Show all 3 artifacts directly when ready
  - Redirect to patent detail page when complete

**Processing:**
- Generate all 3 artifacts in sequence
- Show progress: "Processing... ELIA15 complete (1/3), Business Narrative generating (2/3)..."
- When done, show all artifacts

**Credit Transaction:**
- Log transaction: -10 credits, type='ip_processing'
- Update user credit balance

---

### 8. Credit System

**Purpose:** Track usage and enable future monetization

**Requirements:**

**Initial Credits:**
- New users get 100 free credits
- Transaction logged: +100 credits, type='signup_bonus'

**Credit Costs:**
- 10 credits per patent analysis
- Logged as: -10 credits, type='ip_processing'

**Credit Display:**
- Show on dashboard header
- Show before upload (warning if low)

**Future (Phase 2):**
- Purchase credits: $20 for 100 credits
- Stripe integration

**Technical Notes:**
- Never allow negative credits
- Atomic credit deductions (transaction-safe)

---

## AI Generation Specifications

### Artifact 1: ELIA15

**Prompt Template:**
```
ELIA15: You are a professional skilled in simplifying complex scientific and technical information. Your task is to explain the content of the provided patent to a professional audience in a clear and engaging manner, using language and analogies that would be understandable to a 15-year-old. Please follow this structure:

1. **Introduction:**
   - Introduce the problem the invention aims to solve in straightforward terms.
   - Use analogies or relatable examples to make the problem clear.

2. **The Invention:**
   - Describe the invention concisely, explaining what it does.
   - Use clear language, avoiding unnecessary jargon.

3. **Detailed Functioning:**
   - Outline the main components of the invention and their functions.
   - Explain how these components interact to solve the problem.

4. **Importance:**
   - Highlight why the invention is important and how it improves existing solutions.
   - Discuss the practical benefits and applications of the invention.

5. **Claims:**
   - Summarize the key claims of the invention, explaining what aspects are protected.
   - Use analogies to illustrate these claims.

6. **Visuals and Diagrams:**
   - If the invention includes drawings, explain how they help in understanding the invention.
   - Describe the drawings in simple terms, relating them to the explained concepts.

7. **Relatable Example:**
   - Use a relatable analogy to illustrate how the invention works.
   - Make the analogy engaging and easy to understand.

8. **Why It Matters:**
   - Discuss why understanding this invention is important.
   - Mention other areas where the invention can be useful.

Patent Title: {title}
Patent Full Text: {full_text}
```

**Expected Output:**
- 800-1500 words
- Well-structured with clear headers
- Engaging, accessible language
- Specific analogies relevant to the technology

---

### Artifact 2: Business Narrative

**Prompt Template:**
```
Generate a business narrative that effectively communicates the value of this intellectual property (IP) for commercialization. Follow this structure:

Essential Sections:
1. Problem Definition – Clearly articulate the pain point or unmet need.
2. Solution (Your IP) – Introduce how your innovation uniquely solves the problem.
3. Why It Matters – Highlight key advantages over existing solutions.
4. Market Opportunity – Define potential customers, industry demand, and scalability.
5. Go-to-Market Strategy – Explain the path from development to commercialization.
6. Funding Requirements – Outline financial needs, milestones, and ROI.
7. Technical & Scientific Justification – Support claims with data, research, and references.

Context for this business narrative:
- You have already created this simplified explanation (ELIA15): {elia15_content}
- Here is the full patent text: {full_text}

Use the ELIA15 to understand the technology clearly, then create a compelling business narrative that would resonate with investors, partners, and potential licensees.

Key Guidelines:
- Define the problem in a simple, relatable way
- Present the IP as a clear, transformative solution
- Demonstrate market opportunity with specific examples
- Highlight commercialization path & go-to-market strategy
- Provide specific funding requirements
- Address potential risks & challenges
- Make it compelling and actionable
```

**Expected Output:**
- 1500-2500 words
- Professional business tone
- Market-focused language
- Specific commercialization pathways
- Investor-ready content

---

### Artifact 3: Golden Circle

**Prompt Template:**
```
This is the Golden Circle framework based on Simon Sinek's work. Create a Golden Circle analysis for this patent that defines the WHY, HOW, and WHAT.

Framework:
- WHAT: What does this technology do? What tangible product or good does it create? What intangible service does it provide?
- HOW: How does this innovation achieve its objective? What is the secret sauce or methodology that makes it unique?
- WHY: Why does this innovation exist beyond making money? What is the overarching purpose? Why should customers care?

Context:
- ELIA15 explanation: {elia15_content}
- Business Narrative: {business_narrative_content}

Create a concise but compelling Golden Circle that captures:
1. WHY this technology should exist (purpose, belief, cause)
2. HOW it uniquely delivers on that purpose (differentiation, approach)
3. WHAT it actually produces or enables (products, services, outcomes)

Format your response with clear sections for WHY, HOW, and WHAT. Each section should be 2-4 paragraphs.
```

**Expected Output:**
- 500-800 words total
- Clear WHY/HOW/WHAT sections
- Inspirational but grounded in reality
- Connects technical innovation to human impact

---

## Technical Architecture

### Technology Stack

**Backend:**
- Python 3.11+
- Flask web framework
- SQLAlchemy ORM
- PostgreSQL database

**AI Integration:**
- Anthropic Claude API (Sonnet 3.5)
- Alternative: OpenAI GPT-4 (if Anthropic unavailable)

**PDF Processing:**
- pdfplumber library

**Document Generation:**
- PDF: WeasyPrint
- DOCX: python-docx
- TXT: Built-in Python

**Email Service:**
- SendGrid (100 emails/day free tier)
- Alternative: Resend, Postmark

**Authentication:**
- Flask-Login for session management
- Custom magic link implementation

**Frontend:**
- Jinja2 templates
- Tailwind CSS for styling
- Vanilla JavaScript (no framework needed)
- Optional: htmx for dynamic updates

**File Storage:**
- Local filesystem (Replit persistent storage)
- PDFs stored temporarily in /uploads directory
- Cleaned up after processing (optional retention)

**Background Jobs:**
- Threading module (simple MVP approach)
- Alternative: Celery + Redis (Phase 2 for scale)

---

### Database Schema

See `DATABASE_SCHEMA.md` for complete schema definitions.

**Tables:**
1. `users` - User accounts and credit balances
2. `magic_tokens` - Authentication tokens
3. `patents` - Uploaded IP documents
4. `artifacts` - Generated content
5. `credit_transactions` - Usage tracking

---

### API Endpoints

See `API_SPECIFICATION.md` for complete endpoint definitions.

**Public Routes:**
- `GET /` - Landing page
- `POST /upload` - Upload PDF (unauthenticated)
- `GET /preview/<patent_id>` - Preview ELIA15
- `POST /request-access` - Submit email, send magic link

**Auth Routes:**
- `GET /auth/verify/<token>` - Verify magic link
- `GET /logout` - Logout

**Protected Routes:**
- `GET /dashboard` - User dashboard
- `GET /patent/<id>` - Patent detail view
- `GET /patent/<id>/download?format=pdf|docx|txt` - Download artifacts
- `POST /upload` - Upload new patent (authenticated)

---

## Security & Privacy

**Data Security:**
- HTTPS only (enforced by Replit)
- Secure session cookies (httpOnly, secure flags)
- Magic tokens: cryptographically secure random generation
- SQL injection prevention via parameterized queries (SQLAlchemy)

**Privacy:**
- No sharing of user data
- Patent content not used for AI training (use Anthropic with opt-out)
- Users can delete their patents
- Email only used for authentication (no marketing without consent)

**Rate Limiting:**
- Max 5 uploads per hour per IP (prevent abuse)
- Max 10 magic link requests per email per hour

**File Upload Security:**
- Validate file type (PDF only)
- Max file size: 10MB
- Scan for malicious content (basic validation)
- Store with sanitized filenames

---

## Error Handling

**PDF Parsing Errors:**
- If PDF can't be read: "We couldn't parse this PDF. Please ensure it's a valid patent document."
- Retry option

**AI Generation Errors:**
- If API fails: Retry once automatically
- If still fails: "We encountered an error generating artifacts. Your credits have been refunded."
- Log error, notify admin

**Authentication Errors:**
- Expired magic link: "This link has expired. Please request a new one."
- Invalid token: "Invalid link. Please request a new magic link."

**Credit Errors:**
- Insufficient credits: "You need 10 credits to process a patent. You have X credits remaining."
- Link to purchase credits (Phase 2)

**General Errors:**
- 500 errors: "Something went wrong. Please try again or contact support."
- 404 errors: "Page not found"

---

## Future Enhancements (Post-MVP)

**Phase 2:**
- Credit purchasing via Stripe
- Empathy Map artifact (4th output)
- Lean Canvas artifact (5th output)
- Research paper support (not just patents)

**Phase 3:**
- Team accounts (multiple users per organization)
- Bulk upload (CSV of patent numbers, auto-fetch from USPTO)
- Custom branding for white-label TTO usage
- API access for integration with TTO systems

**Phase 4:**
- Human expert review service (fractional exec offering)
- Partnership matching (connect IP to potential licensees)
- Investor matching

---

## Acceptance Criteria

**MVP is complete when:**

1. ✅ User can upload patent PDF without account
2. ✅ System parses PDF and extracts title, inventors, assignee, dates, full text
3. ✅ ELIA15 is generated and displayed within 30 seconds
4. ✅ User can enter email to create account
5. ✅ Magic link email is sent within 10 seconds
6. ✅ User can click magic link to log in
7. ✅ Business Narrative and Golden Circle are generated in background
8. ✅ User sees dashboard with all patents
9. ✅ User can view patent detail page with all 3 artifacts
10. ✅ User can download artifacts in PDF, DOCX, TXT formats
11. ✅ Credit system tracks 100 free credits, deducts 10 per patent
12. ✅ Authenticated users can upload additional patents
13. ✅ Error states are handled gracefully
14. ✅ App is deployed and accessible on Replit

---

## Launch Checklist

**Pre-Launch:**
- [ ] Test with 10 different patent PDFs
- [ ] Verify email delivery (SendGrid configured)
- [ ] Test all download formats
- [ ] Security review (SQL injection, XSS prevention)
- [ ] Privacy policy page
- [ ] Terms of service page
- [ ] Error logging configured
- [ ] Analytics setup (optional: Google Analytics or Plausible)

**Launch:**
- [ ] Deploy to Replit
- [ ] Custom domain (optional)
- [ ] Monitor error logs
- [ ] Collect user feedback

**Post-Launch:**
- [ ] Weekly usage metrics review
- [ ] User interviews (first 10 users)
- [ ] Iterate based on feedback

---

## Appendix

### Example Patent for Testing
User will provide sample patent PDF.

### AI Cost Estimates
- ELIA15: ~$0.09 per patent
- Business Narrative: ~$0.12 per patent
- Golden Circle: ~$0.06 per patent
- Total: ~$0.27 per patent
- Pricing: $2 per patent (10 credits @ $20/100 credits)
- Margin: $1.73 per patent

### Support & Documentation
- User guide (how to upload, interpret artifacts)
- FAQ (common questions about credits, downloads, data privacy)
- Contact email: support@ipscaffold.com (setup forwarding)

---

**Document Version:** 1.0
**Last Updated:** 2026-01-07
**Author:** IP Scaffold Team
